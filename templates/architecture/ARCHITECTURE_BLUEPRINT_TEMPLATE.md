<div dir="rtl" style="text-align: right;">

> ⚙️ **Template Notice:**  
> קובץ זה הוא תבנית רשמית של Docs-as-System.  
> אין לערוך אותו ישירות בתוך הפרויקט — בעת אתחול מערכת חדשה, יש להעתיק אותו אל תיקייה בשם `docs/architecture/`  
> ולשמור את הקובץ בשם `ARCHITECTURE_BLUEPRINT.md` ולהתאים אותו לפרויקט.

# תבנית אפיון טכני — Architecture Blueprint

**מסמך בפרויקט בפועל:** `docs/architecture/ARCHITECTURE_BLUEPRINT.md`  
**תבנית בתיקיית התבניות:** `templates/architecture/ARCHITECTURE_BLUEPRINT_TEMPLATE.md`  
**יוצר:** סוכן AI (בהנחיית אדם)  
**מאשר:** אדם (ארכיטקט / Tech Lead)  
**סוג אפיון:** אפיון טכני  

---

## הערת פתיח – שימוש אוניברסלי

מסמך זה הוא חלק ממערך תבניות גנרי של **Docs-as-System**,  
ומשמש בסיס לתיעוד, בקרה ופיתוח בכל תחום תוכנה —  
Web, Mobile, Backend, Cloud, Data, AI, Embedded או Multi-Agent.  

הוא מניח מודל עבודה שבו הסוכן (AI) הוא המבצע בפועל,  
והאדם הוא בעל הסמכות, האישור והבקרה.  
הסוכן פועל תחת מדיניות מתועדת, מתעד כל פעולה,  
ומבצע Commits מקומיים בלבד במערכת ניהול גרסאות (Git או דומה).  
האדם מאשר את השינויים ומבצע את ה־Merge הסופי.  

> עקרון היסוד: **האדם קובע את הכוונה, הסוכן מממש אותה, והמערכת מתעדת הכול.**

---

## מטרת המסמך

**בנקודה זו, כבר יודעים מה צריך לבנות.**  
עכשיו מגיעה החשיבה המערכתית — לשרטט את המבנה הטכני שיוציא את הדרישות לפועל.

מסמך זה מתרגם את האפיון הלוגי (`PROJECT_SPEC.md`)  
לתכנון טכנולוגי מפורט ובר־מימוש.  
הוא מהווה את **הגשר בין האפיון לבין תוכנית העבודה** —  
מגדיר כיצד המערכת תיבנה בפועל, ומבטיח שהסוכן יפתח בכיוון הנכון.

### המסמך כולל:

✅ **בחירת ארכיטקטורת פיתוח** – Monolith, Microservices, Modular Monolith, Serverless, Event-Driven וכו'  
✅ **חלוקה לשכבות** – הפרדה ברורה בין רכיבי המערכת (Presentation, Application, Domain, Infrastructure)  
✅ **רשימת רכיבים** – מי אחראי על מה, וכיצד הם תלויים זה בזה  
✅ **גבולות אחריות** – מה כל רכיב עושה (ומה לא)  
✅ **מיפוי זרימות נתונים** – איך מידע עובר בין חלקי המערכת  
✅ **נקודות אינטגרציה** – חיבור למערכות חיצוניות, APIs, תורים  
✅ **בחירת טכנולוגיות פיתוח** – שפות תכנות, מסדי נתונים, Frameworks, כלי תקשורת, תשתיות ענן  
✅ **החלטות עיצוב עיקריות** – למה נבחרו ארכיטקטורה וטכנולוגיות מסוימות, ומתי יש לשנות  

### בחירות ארכיטקטוניות וטכנולוגיות שמוגדרות כאן:

במסמך זה **אתה קובע** את הארכיטקטורה והטכנולוגיות הקונקרטיות שישמשו לפיתוח:

**ארכיטקטורת המערכת:**
- **סגנון ארכיטקטוני** – Monolithic, Microservices, Modular Monolith, Serverless, Event-Driven, Layered, Hexagonal, Clean Architecture וכו'
- **דפוסי תקשורת** – REST, GraphQL, gRPC, Message Queue, Event Bus, WebSockets וכו'
- **אסטרטגיית Deployment** – Single Server, Multi-Service, Containerized, Cloud-Native וכו'

**טכנולוגיות פיתוח:**
- **שפת תכנות** – Python, C#, TypeScript, Java, Go, Rust וכו'
- **מסדי נתונים** – PostgreSQL, MongoDB, Redis, SQL Server, MySQL, DynamoDB וכו'
- **Frameworks** – FastAPI, .NET, Express, Spring Boot, Django, NestJS וכו'
- **כלי תקשורת** – RabbitMQ, Kafka, Redis Pub/Sub, Azure Service Bus, AWS SQS וכו'
- **תשתיות** – Docker, Kubernetes, Azure, AWS, GCP, On-Premise וכו'
- **כלי ניטור ולוגים** – Grafana, ELK, Prometheus, Application Insights, DataDog וכו'

הבחירות האלו **מנחות את הסוכן** בשלב הפיתוח ומבטיחות עקביות ארכיטקטונית וטכנולוגית לאורך הפרויקט.

> **הערת ניטרליות:**  
> התבנית עצמה אינה ממליצה על טכנולוגיה כלשהי.  
> כל דוגמה המופיעה במסמך זה נועדה להמחשה בלבד.  
> **אתה** מחליט מה מתאים לפרויקט שלך, והמסמך פשוט מתעד את ההחלטות.

### איך מומלץ ליצור אותו?

**מומלץ מאוד ליצור מסמך זה בעזרת מודל שיחה חיצוני** (כמו ChatGPT, Claude, Gemini).  
מודל שיחה מאפשר:  
- לשאול שאלות מבהרות על דרישות הפרויקט  
- להציע חלופות ארכיטקטוניות מבוססות ניסיון  
- לבחון התאמה בין טכנולוגיות לדרישות (ביצועים, אבטחה, עלות)  
- ללטש את המבנה בשלבים, עד שהוא ברור ומגובש  
- לקבל המלצות על שילובים נכונים בין כלים  

**בסוף השיחה**, העתק את התוכן למסמך `docs/architecture/ARCHITECTURE_BLUEPRINT.md` בפרויקט,  
ומכאן תוכל לעבור לשלב הבא: **תוכנית עבודה מפורטת** (`IMPLEMENTATION_PLAN.md`).

### למה המסמך הזה כל כך קריטי?

מסמך זה משמש **מקור אחד לתכנון, פיקוח ותיעוד ארוך טווח**.  
הוא מגדיר את הכיוון הטכני, ובעזרתו הסוכן יודע:  
- מהי הארכיטקטורה שהוא צריך לממש  
- באילו טכנולוגיות להשתמש (ולא לסטות מהן בלי אישור)  
- מה מותר לו לשנות, ומה מחייב אישור אנושי  
- איך לנתח ולבדוק עקביות בין הקוד לבין התיעוד  

בנוסף, המסמך מגדיר את **גבולות הסוכן** — מה מותר לו ליצור, לשנות או להציע, ומה מחייב אישור אנושי לפני מימוש.  
זהו עקרון הליבה של Docs-as-System: תיעוד כגבול פעולה.

כך נשמר רצף אמיתי בין **Intent → Architecture → Execution → Validation**.

---

## סקירה מערכתית (System Overview)

תיאור כללי של רכיבי הליבה במערכת והקשרים ביניהם:

- שכבת ממשק (Frontend / API Gateway / Web Client)  
- שכבת שירותים ולוגיקה עסקית (Application Layer / Service Layer)  
- שכבת דומיין (Domain Layer / Entities / Business Rules)  
- שכבת נתונים (Data Layer / Repositories / ORM / Caching)  
- תורים, מסרים ואירועים (Messaging / Event Bus / Queue Consumers)  
- אינטגרציות חיצוניות (External APIs / Third-Party Systems)  
- ניטור ואבטחה (Monitoring / Identity / Security Enforcement)

ניתן לצרף דיאגרמה (Mermaid או Eraser.io) שתמחיש את הזרימה בין הרכיבים.

---

## עקרונות הנחיה (Architectural Principles)

- **Separation of Concerns** – כל שכבה מטפלת באחריות אחת בלבד.  
- **Single Source of Truth** – הנתונים מעודכנים ממקור אחד בלבד.  
- **Idempotency** – כל פעולה חוזרת מניבה אותה תוצאה.  
- **Observability** – כל פעולה מתועדת ונמדדת.  
- **Agent Transparency** – הסוכן לעולם לא משנה קוד ללא רישום ביומן וביקורת אנושית.  
- **Human-in-the-Loop** – כל שינוי מהותי מחייב אישור אדם.  

---

## חלוקה לשכבות

| שכבה | תיאור | אחריות עיקרית | טכנולוגיות אפשריות | מעורבות סוכן |
|--------|----------|------------------|--------------------|----------------|
| Presentation | חשיפת ממשקים חיצוניים ו־UI | REST / GraphQL / Web UI | Angular / Blazor / React | אימות חוזים |
| Application | תהליכים עסקיים ו־Workflows | תיאום בין שירותים ולוגיקות | .NET / Node.js / Python | הצעות אופטימיזציה |
| Domain | ישויות וחוקים עסקיים | הגדרת ישויות ודפוסי פעולה | Domain Models / Rules Engine | ניתוח לוגיקה |
| Infrastructure | תשתיות נתונים ותקשורת | DB / Cache / Messaging / APIs | SQL / RabbitMQ / Redis | הגדרת קונפיגורציה |

---

## מבנה השירותים (Service Topology)

| שירות / מודול | תפקיד | תלות בשירותים אחרים | סוג תקשורת | הערות |
|----------------|----------|-----------------------|----------------|----------|
| (למילוי) | (למילוי) | (למילוי) | REST / Queue / gRPC | (למילוי) |

> הסוכן רשאי לייצר הצעות לחלוקת שירותים ולנתח תלותיות, אך האדם מאשר את המבנה הסופי.

---

## בחירת טכנולוגיות (Technology Stack)

| תחום | טכנולוגיה נבחרת | נימוק לבחירה | אחראי |
|--------|--------------------|----------------|------------|
| Backend | (לדוגמה) .NET / Java / Node.js | לפי ביצועים ותחזוקה | אדם |
| Messaging | (לדוגמה) RabbitMQ / Kafka / SQS | אמינות ו־Retry מובנה | סוכן + אדם |
| Database | (לדוגמה) SQL Server / PostgreSQL / MongoDB | תמיכה בטרנזקציות ו־Scalability | אדם |
| Frontend | (לדוגמה) Angular / React / Blazor | אינטראקציה עם APIs | סוכן |
| Infrastructure | (לדוגמה) On-Prem / Cloud / Hybrid | מדיניות אבטחה ותקציב | אדם |
| Observability | (לדוגמה) Grafana / ELK / Prometheus | ניטור וזיהוי תקלות | סוכן |

> כל הטכנולוגיות המוצגות להמחשה בלבד ואינן מחייבות את המשתמש בתבנית.

---

## APIs וחוזים (API Contracts)

| שם API | תיאור | פעולה | קלט | פלט | מאושר ע״י |
|-----------|-----------|----------|--------|--------|------------|
| (למילוי) | (למילוי) | GET / POST / PUT / DELETE | (Schema) | (Schema) | (למילוי) |

> כל שינוי בחוזה דורש אישור אנושי ועדכון במסמך זה.  
> הסוכן יכול לבצע סריקות עקביות בין המפרטים (Spec) לבין הקוד.

---

## אינטגרציות חיצוניות (External Systems)

| מערכת חיצונית | סוג חיבור | תדירות / טריגר | הערות |
|----------------|-------------|------------------|----------|
| (למילוי) | API / Queue / Webhook | (למילוי) | (למילוי) |

---

## ארכיטקטורת נתונים (Data Architecture)

תיאור הישויות, היחסים והמקורות הראשיים של נתונים במערכת.

| ישות | תיאור | סוג אחסון | קשרים עיקריים |
|--------|----------|---------------|----------------|
| (למילוי) | (למילוי) | SQL / NoSQL | (למילוי) |

> הסוכן רשאי להציע דיאגרמת ERD אוטומטית, אך לא לשנות סכמות ללא אישור.

---

## זרימות נתונים (Data Flow)

תיאור הזרימה הלוגית של מידע במערכת:  
קלט → תור → צרכן → DB → תגובה למשתמש.  

**דוגמה:**  
Frontend → API Gateway → Application → Queue → Consumer → DB → Notification Service.  

---

## אבטחה (Security Architecture)

- אימות והרשאה מבוססי Identity Provider ארגוני.  
- הצפנת נתונים במעבר ובמנוחה.  
- הפרדת הרשאות לפי שכבות ותפקידים.  
- ניהול Secrets באמצעות Vault / Key Vault בלבד.  
- ניטור חריגות והתרעות בזמן אמת.  
- כל שינוי מדיניות נרשם ב־`SECURITY_CHECKLIST.md`.

---

## ניטור ולוגים (Observability & Logging)

- לוגים במבנה אחיד (Structured JSON).  
- כל פעולה מקבלת מזהה Trace אחיד בין רכיבים.  
- שילוב בין Human Logs ל־Agent Logs.  
- מדדים: זמני תגובה, תקלות חוזרות, עומסים, אבטחה.  
- הסוכן מפיק דוחות Self-Diagnosis בסוף כל מחזור (BY_CYCLE).

---

## DevOps ופריסה (Deployment & CI/CD)

- ניהול גרסאות לפי SemVer.  
- תהליך Build ובדיקות לפני Merge ל־`main`.  
- בדיקות Smoke אחרי כל פריסה.  
- Rollback מתועד ובר־הפעלה.  
- פריסה מבוקרת לפי סבבים (Canary / Blue-Green).  
- כל שלב נרשם ב־`IMPLEMENTATION_LOG.md`.

---

## עקרונות איכות ו־Scalability

- מערכת ניתנת להרחבה אופקית (Scale-Out).  
- טיפול בכשלים באמצעות Retry ו־DLQ.  
- מעקב אחר צווארי בקבוק.  
- ביקורת קבועה על עמידה במדדים (SLA / SLO / SLI).  
- כל שינוי נמדד ומשוקף חזרה בלוגים ובדוחות.

---

## תיעוד פנימי ואוטומציה

- כל רכיב חדש מחייב עדכון במסמכי התכנון.  
- הסוכן מאמת עקביות בין Blueprint ל־PLAN ול־Spec.  
- תהליכי Validation מתבצעים אוטומטית בסוף כל מחזור.  
- האדם מאשר סופית את התוצאות בדו״ח `VALIDATION_REPORT.md`.

---

## סיכום

מסמך זה מהווה את **מפת הדרכים ההנדסית** של המערכת.  
הוא מגשר בין ההיגיון העסקי לבין הביצוע בפועל,  
ומגדיר בבירור את תפקידו של הסוכן כזרוע ביצועית בתוך מערכת מתועדת.  

ה־Blueprint הוא בסיס הבקרה של Docs-as-System:  
כל שינוי טכני חייב לנבוע ממנו ולהתועד בחזרה אליו.  
כך נשמר רצף אמיתי בין **Intent → Execution → Validation**.

---

>© 2025 תומר קדם. חלק ממערך התבניות הרשמי של **Docs-as-System**.

</div>
