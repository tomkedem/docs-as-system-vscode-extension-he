<div dir="rtl" style="text-align: right;">

# 🧰 git — סקריפטי עבודה בטוחים ל־Docs-as-System

התיקייה כוללת סקריפטים להפעלה מבוקרת של תהליך Git בפרויקטים המנוהלים בשיטה.  
הכללים הבאים נשמרים תמיד:

* אין מיזוג אוטומטי לענפים מוגנים  
* דחיפה על ידי סוכן חסומה כברירת מחדל  
* כל Commit מתויג לפי מזהה מחזור `CYCLE_ID` ונרשם ביומן הביצוע

---

## קבצים

| קובץ | תפקיד |
|------|-------|
| `CREATE_BRANCH.sh` | יצירת ענף חדש מתוך הענף הראשי עם בדיקות בטיחות. |
| `STAGE_AND_COMMIT.sh` | קידום קבצים לפי מדיניות ויצירת הודעת Commit מתויגת. |
| `PUSH_BRANCH.sh` | דחיפת ענף ל־origin. נחסם לסוכן אלא אם אושר במפורש. |
| `OPEN_PULL_REQUEST.sh` | פתיחת PR טיוטה לאישור אנושי דרך `gh`. |
| `MERGE_AFTER_APPROVAL.sh` | מיזוג PR לאחר אישור אנושי ובדיקות ירוקות בלבד. |

---

## משתני סביבה שימושיים

* `DEFAULT_BRANCH` — ברירת מחדל `main`  
* `ALLOW_AGENT_PUSH` — ברירת מחדל `false`. כשאמת, מאפשר דחיפה בסקריפט הדחיפה בהתאם למדיניות הפרויקט  
* `CYCLE_ID` — מזהה המשימה הנוכחית. מבוסס על תאריך ומספר ייחודי ליום, למשל `2025_11_13_001`. חובה לצורך תיוג Commit ותיעוד עקבי  
* `ALLOWED_PATHS` — תבניות קבצים שמותר לסוכן לקדם בקומיט. ברירת מחדל `docs/** src/**`

---

## עקרונות בטיחות

* אין יצירת ענפים בשם מוגן  
* אין דחיפה אוטומטית ללא אישור מפורש  
* אין מחיקה או דריסה של היסטוריה  
* אין מיזוג על ידי סוכן  
* כל פעולה משמעותית מתועדת ביומן הביצוע ונקשרת ל `CYCLE_ID`

---

## שימוש ב־CYCLE_ID עם הלוגים

* כל קומיט שנוצר דרך `STAGE_AND_COMMIT.sh` כולל תיוג `CYCLE_ID` בהודעת הקומיט  
* קובצי סיכום כגון `IMPLEMENTATION_LOG_SUMMARY_*.md` יכולים להיווצר לפי `CYCLE_ID` או לפי טווחי תאריכים המתואמים עם אותו מזהה  
* כך ניתן לשחזר בקלות את כל השינויים והאירועים ששייכים למשימה אחת

---

>© 2025 תומר קדם. חלק ממערך התבניות הרשמי של **Docs-as-System**.
</div>
