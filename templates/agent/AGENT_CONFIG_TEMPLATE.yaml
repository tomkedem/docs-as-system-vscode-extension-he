# ========================================
# קובץ תצורת סוכן: AGENT_CONFIG_TEMPLATE.yaml
# ========================================
# קובץ זה מגדיר לסוכן היכן לשמור לוגים, איך לבצע רוטציה,
# ואיך מותר לו לפעול מול מערכת ה-Git של הפרויקט.
# אין כאן לוגיקה – רק הנחיות תצורה שהסוכן קורא לפני כל פעולה.
# ========================================

logging:
  # נתיב בסיסי שבו נשמרים כל קבצי הלוגים של הפרויקט.
  basePath: "docs/logs"

  # האם לבצע רוטציה של קבצי הלוגים (כלומר לפתוח קובץ חדש) בסיום מחזור עבודה.
  rotate: true

  # מדיניות הרוטציה:
  # "by_cycle" – פתיחת לוג חדש בתחילת כל מחזור עבודה (ספרינט / גרסה).
  # "monthly"  – פתיחת לוג חדש אחת לחודש לפי תאריך לוח שנה.
  # "manual"   – רוטציה רק לפי הוראה מפורשת של אדם או פרומפט ייעודי.
  rotationPolicy: "by_cycle"

  # הנתיב אל תבנית התקציר שעל פיה נבנה קובץ הסיכום המחזורי.
  # הסוכן משתמש בתבנית הזו כדי לייצר תקציר חדש בכל פעם שנסגר מחזור.
  summaryTemplatePath: "templates/he/logs/IMPLEMENTATION_LOG_SUMMARY_BY_CYCLE_TEMPLATE.md"

# ------------------------------
# קטע זה מגדיר את מדיניות העבודה מול Git
# ------------------------------
git:
  # שם הענף הראשי שבו נשמרת הגרסה הרשמית של הפרויקט.
  defaultBranch: "main"

  # תבנית שמות לענפים שמותר לסוכן לעבוד עליהם.
  # דוגמה: feature/LOGIN או fix/DB-CONNECTION
  workingBranchPattern: "feature/*|fix/*|chore/*|docs/*"

  # האם הסוכן רשאי לבצע commit בענף העבודה שלו.
  allowAgentCommit: true

  # האם הסוכן רשאי לבצע push (דחיפה) לשרת מרוחק ללא אישור אנושי.
  # false אומר שהדחיפה תתבצע רק דרך pipeline מבוקר.
  allowAgentPush: false

  # רשימת ענפים מוגנים. הסוכן לעולם לא ישנה אותם ישירות.
  protectedBranches:
    - "main"        # הענף הראשי
    - "master"      # הענף הראשי (שם ישן)
    - "release/*"   # כל ענף שחרור

  # רשימת תיקיות או קבצים שבהם הסוכן רשאי לגעת.
  # כל שינוי מחוץ לנתיבים האלו ייחסם.
  allowedPaths:
    - "docs/**"     # תיעוד ומדיניות
    - "src/**"      # קוד מקור
    # אפשר להוסיף כאן גם tests/** אם נדרש

  # תבנית לבניית הודעות commit.
  commitMessage:
    # האם לכלול תגים מוסכמים בכותרת הקומיט (למשל [FEATURE], [FIX]).
    includeTags: true

    # האם לצרף לקומיט קישור לקובץ הלוג של המחזור הפעיל.
    includeCycleLogLink: true

    # שורות “טריילר” שמתווספות לסוף הודעת הקומיט.
    trailers:
      # ייחוס משותף לסוכן המקומי שביצע את השינוי.
      - "Co-authored-by: cargo-helper <agent@local>"
      
# © 2025 תומר קדם. חלק ממערך התבניות הרשמי של **Docs-as-System**. 